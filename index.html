<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>To-Do Dashboard</title>
<style>
*{box-sizing:border-box;font-family:"Poppins",sans-serif}
body{
  margin:0;background:#f0f2f5;overflow:hidden;
  display:flex;justify-content:center;align-items:center;height:100vh;
}
.container{
  width:360px;background:#fff;padding:25px;border-radius:20px;
  box-shadow:0 8px 20px rgba(0,0,0,0.15);overflow:hidden;
  position:relative;transition:transform .5s ease-in-out;
}
.hidden{display:none}

/* Page Transitions */
.page{position:absolute;top:0;left:0;width:100%;height:100%;
  opacity:0;visibility:hidden;transform:translateY(20px);
  transition:opacity .4s ease,transform .4s ease,visibility 0s linear .4s;}
.page.active{opacity:1;visibility:visible;transform:translateY(0);transition-delay:0s}

/* Input & Buttons */
input[type=text],input[type=password]{
  width:100%;padding:10px;margin:8px 0;border:1px solid #ccc;border-radius:10px;
}
button{
  width:100%;padding:10px;border:none;border-radius:10px;
  background:#4e73df;color:white;font-weight:600;cursor:pointer;transition:.3s;
}
button:hover{background:#2e59d9}

/* Header */
header{
  display:flex;justify-content:space-between;align-items:center;
  margin-bottom:15px;
}
header h2{margin:0;color:#333;font-size:20px}
.logout{background:#e74a3b;width:auto;padding:8px 12px;font-size:14px}
.logout:hover{background:#c0392b}

/* Section control */
.sections{
  display:flex;justify-content:space-around;margin-bottom:10px;
}
.sections button{
  width:auto;padding:8px 15px;border-radius:8px;background:#f8f9fc;
  color:#4e73df;font-weight:500;transition:.3s;
}
.sections button.active{background:#4e73df;color:white}

/* To-do section animation */
.section{
  position:absolute;top:130px;left:0;width:100%;
  opacity:0;visibility:hidden;transform:translateY(10px);
  transition:opacity .4s ease,transform .4s ease,visibility 0s linear .4s;
}
.section.active{
  opacity:1;visibility:visible;transform:translateY(0);
  transition-delay:0s;
}

/* To-do styling */
.todo-input{display:flex;gap:8px;margin-bottom:10px}
.todo-input input{flex:1}
.task{
  display:flex;justify-content:space-between;align-items:center;
  background:#f8f9fc;padding:10px;border-radius:10px;margin-bottom:6px;
  transition:.3s;
}
.task.done{text-decoration:line-through;opacity:.6}
.task .buttons{display:flex;gap:5px}
.task button{width:auto;padding:5px 8px;font-size:13px;border-radius:8px}
.task button.done-btn{background:#1cc88a}
.task button.done-btn:hover{background:#17a673}
.task button.delete-btn{background:#e74a3b}
.task button.delete-btn:hover{background:#c0392b}

</style>
</head>
<body>

<div class="container">

  <!-- Login Page -->
  <div id="loginPage" class="page active">
    <h2>Login</h2>
    <input id="username" type="text" placeholder="Username">
    <input id="password" type="password" placeholder="Password">
    <button onclick="login()">Masuk</button>
    <p style="text-align:center;margin-top:10px;">Belum punya akun? 
      <a href="#" onclick="showRegister()">Daftar</a></p>
  </div>

  <!-- Register Page -->
  <div id="registerPage" class="page">
    <h2>Daftar Akun</h2>
    <input id="newUsername" type="text" placeholder="Username baru">
    <input id="newPassword" type="password" placeholder="Password baru">
    <button onclick="register()">Daftar</button>
    <p style="text-align:center;margin-top:10px;">Sudah punya akun? 
      <a href="#" onclick="showLogin()">Login</a></p>
  </div>

  <!-- Dashboard -->
  <div id="dashboardPage" class="page">
    <header>
      <h2>Halo, <span id="displayUser"></span></h2>
      <button class="logout" onclick="logout()">Keluar</button>
    </header>
    <div class="sections">
      <button id="personalBtn" onclick="switchCategory('personal')" class="active">Personal</button>
      <button id="workBtn" onclick="switchCategory('work')">Work</button>
    </div>

    <!-- Personal -->
    <div id="personalSection" class="section active">
      <div class="todo-input">
        <input id="taskInput" type="text" placeholder="Tambahkan tugas...">
        <button onclick="addTask()">Tambah</button>
      </div>
      <div id="tasks"></div>
    </div>

    <!-- Work -->
    <div id="workSection" class="section">
      <div class="todo-input">
        <input id="taskInputWork" type="text" placeholder="Tambahkan tugas kerja...">
        <button onclick="addTask()">Tambah</button>
      </div>
      <div id="tasksWork"></div>
    </div>
  </div>

</div>

<script>
let users = JSON.parse(sessionStorage.getItem("savedUsers")||"[]");
let currentUser=null;
let tasks={personal:[],work:[]};
let currentCategory="personal";

/* ==== Login & Register ==== */
function register(){
  const username=document.getElementById("newUsername").value.trim();
  const password=document.getElementById("newPassword").value.trim();
  if(!username||!password)return alert("Isi username dan password!");
  if(users.find(u=>u.username===username))return alert("Username sudah digunakan!");
  users.push({username,password});
  sessionStorage.setItem("savedUsers",JSON.stringify(users));
  alert("Akun berhasil dibuat!");
  showLogin();
}
function login(){
  const username=document.getElementById("username").value.trim();
  const password=document.getElementById("password").value.trim();
  const found=users.find(u=>u.username===username&&u.password===password);
  if(!found)return alert("Username atau password salah!");
  currentUser=username;
  sessionStorage.setItem("loggedInUser",username);
  document.getElementById("displayUser").textContent=username;
  animateSwitch("loginPage","dashboardPage");
  loadTasks();
}
function logout(){
  sessionStorage.removeItem("loggedInUser");
  animateSwitch("dashboardPage","loginPage");
}
function showRegister(){animateSwitch("loginPage","registerPage")}
function showLogin(){animateSwitch("registerPage","loginPage")}

/* ==== Switch pages ==== */
function animateSwitch(from,to){
  const f=document.getElementById(from);
  const t=document.getElementById(to);
  f.classList.remove("active");
  setTimeout(()=>{t.classList.add("active")},100);
}
function checkSession(){
  const saved=sessionStorage.getItem("loggedInUser");
  if(saved){
    currentUser=saved;
    document.getElementById("displayUser").textContent=saved;
    document.getElementById("loginPage").classList.remove("active");
    document.getElementById("dashboardPage").classList.add("active");
    loadTasks();
  }
}

/* ==== To-do Logic ==== */
function switchCategory(cat){
  currentCategory=cat;
  document.querySelectorAll(".sections button").forEach(b=>b.classList.remove("active"));
  document.getElementById(cat+"Btn").classList.add("active");
  showSection(cat==="personal"?"personalSection":"workSection");
  renderTasks();
}
function showSection(id){
  const active=document.querySelector(".section.active");
  const target=document.getElementById(id);
  if(active===target)return;
  if(active)active.classList.remove("active");
  setTimeout(()=>target.classList.add("active"),50);
}
function saveTasks(){sessionStorage.setItem("tasks_"+currentUser,JSON.stringify(tasks));}
function loadTasks(){
  const saved=sessionStorage.getItem("tasks_"+currentUser);
  if(saved)tasks=JSON.parse(saved);
  renderTasks();
}
function addTask(){
  const input=currentCategory==="personal"?document.getElementById("taskInput"):document.getElementById("taskInputWork");
  const t=input.value.trim();
  if(!t)return;
  tasks[currentCategory].push({text:t,done:false});
  input.value="";
  saveTasks();
  renderTasks();
}
function toggleDone(i){
  tasks[currentCategory][i].done=!tasks[currentCategory][i].done;
  saveTasks();renderTasks();
}
function deleteTask(i){
  tasks[currentCategory].splice(i,1);
  saveTasks();renderTasks();
}
function renderTasks(){
  const cont=currentCategory==="personal"?document.getElementById("tasks"):document.getElementById("tasksWork");
  cont.innerHTML="";
  tasks[currentCategory].forEach((t,i)=>{
    const div=document.createElement("div");
    div.className="task"+(t.done?" done":"");
    const span=document.createElement("span");
    span.textContent=t.text;
    const btns=document.createElement("div");
    btns.className="buttons";
    btns.innerHTML=`<button class='done-btn' onclick='toggleDone(${i})'>‚úì</button>
                    <button class='delete-btn' onclick='deleteTask(${i})'>üóëÔ∏è</button>`;
    div.appendChild(span);
    div.appendChild(btns);
    cont.appendChild(div);
  });
}

/* ==== Init ==== */
document.getElementById("password").addEventListener("keydown",e=>{if(e.key==="Enter")login()});
document.getElementById("newPassword").addEventListener("keydown",e=>{if(e.key==="Enter")register()});
checkSession();
</script>
</body>
</html>
